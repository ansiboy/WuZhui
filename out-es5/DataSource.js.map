{"version":3,"sources":["../out/DataSource.js"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","define","require","exports","Errors_1","Utility_1","Object","defineProperty","DataSource","args","inserting","callbacks1","inserted","deleting","callbacks","deleted","updating","updated","selecting","selected","error","primaryKeys","item","insert","delete","update","select","index","canInsert","Errors","dataSourceCanntInsert","argumentNull","fire","executeInsert","data","assign","catch","exc","processError","canDelete","dataSourceCanntDelete","checkPrimaryKeys","executeDelete","canUpdate","dataSourceCanntUpdate","executeUpdate","theItem","otherItem","length","pk","key","indexOf","primaryKeyNull","fireCallback","executeSelect","dataItems","totalRowCount","Array","isArray","undefined","queryResultTypeError","method","handled","DataSourceSelectArguments","startRowIndex","maximumRows","ArrayDataSource","items","sortExpression","slice"],"mappings":"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","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\ndefine([\"require\", \"exports\", \"./Errors\", \"./Utility\"], function (require, exports, Errors_1, Utility_1) {\r\n    \"use strict\";\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    class DataSource {\r\n        constructor(args) {\r\n            this.inserting = Utility_1.callbacks1();\r\n            this.inserted = Utility_1.callbacks1();\r\n            this.deleting = Utility_1.callbacks();\r\n            this.deleted = Utility_1.callbacks();\r\n            this.updating = Utility_1.callbacks();\r\n            this.updated = Utility_1.callbacks();\r\n            this.selecting = Utility_1.callbacks();\r\n            this.selected = Utility_1.callbacks();\r\n            this.error = Utility_1.callbacks();\r\n            this.args = args;\r\n            this.primaryKeys = args.primaryKeys || [];\r\n        }\r\n        get canDelete() {\r\n            return this.args.delete != null && this.primaryKeys.length > 0;\r\n        }\r\n        get canInsert() {\r\n            return this.args.insert != null && this.primaryKeys.length > 0;\r\n        }\r\n        get canUpdate() {\r\n            return this.args.update != null && this.primaryKeys.length > 0;\r\n        }\r\n        executeInsert(item, args) {\r\n            return this.args.insert(item, args);\r\n        }\r\n        executeDelete(item, args) {\r\n            return this.args.delete(item, args);\r\n        }\r\n        executeUpdate(item, args) {\r\n            return this.args.update(item, args);\r\n        }\r\n        executeSelect(args) {\r\n            args = args || {};\r\n            return this.args.select(args);\r\n        }\r\n        insert(item, args, index) {\r\n            if (!this.canInsert)\r\n                throw Errors_1.Errors.dataSourceCanntInsert();\r\n            if (!item)\r\n                throw Errors_1.Errors.argumentNull(\"item\");\r\n            if (typeof args == 'number') {\r\n                index = args;\r\n                args = null;\r\n            }\r\n            this.inserting.fire(this, item, index);\r\n            return this.executeInsert(item, args).then((data) => {\r\n                Object.assign(item, data);\r\n                this.inserted.fire(this, item, index);\r\n                return data;\r\n            }).catch(exc => {\r\n                this.processError(exc, 'insert');\r\n                throw exc;\r\n            });\r\n        }\r\n        delete(item, args) {\r\n            if (!this.canDelete)\r\n                throw Errors_1.Errors.dataSourceCanntDelete();\r\n            if (!item)\r\n                throw Errors_1.Errors.argumentNull(\"item\");\r\n            this.checkPrimaryKeys(item);\r\n            this.deleting.fire(this, item);\r\n            return this.executeDelete(item, args).then((data) => {\r\n                this.deleted.fire(this, item);\r\n                return data;\r\n            }).catch(exc => {\r\n                this.processError(exc, 'delete');\r\n                throw exc;\r\n            });\r\n        }\r\n        update(item, args) {\r\n            if (!this.canUpdate)\r\n                throw Errors_1.Errors.dataSourceCanntUpdate();\r\n            if (!item)\r\n                throw Errors_1.Errors.argumentNull(\"item\");\r\n            this.checkPrimaryKeys(item);\r\n            this.updating.fire(this, item);\r\n            return this.executeUpdate(item, args).then((data) => {\r\n                Object.assign(item, data);\r\n                this.updated.fire(this, item);\r\n                return data;\r\n            }).catch((exc) => {\r\n                this.processError(exc, 'update');\r\n                throw exc;\r\n            });\r\n        }\r\n        isSameItem(theItem, otherItem) {\r\n            if (theItem == null)\r\n                throw Errors_1.Errors.argumentNull('theItem');\r\n            if (otherItem == null)\r\n                throw Errors_1.Errors.argumentNull('otherItem');\r\n            if (this.primaryKeys.length == 0)\r\n                return theItem == otherItem;\r\n            this.checkPrimaryKeys(theItem);\r\n            this.checkPrimaryKeys(otherItem);\r\n            for (let pk of this.primaryKeys) {\r\n                if (theItem[pk] != otherItem[pk])\r\n                    return false;\r\n            }\r\n            return true;\r\n        }\r\n        checkPrimaryKeys(item) {\r\n            for (let key in item) {\r\n                if (item[key] == null && this.primaryKeys.indexOf(key) >= 0)\r\n                    throw Errors_1.Errors.primaryKeyNull(key);\r\n            }\r\n        }\r\n        select(args) {\r\n            args = args || {};\r\n            Utility_1.fireCallback(this.selecting, this, args);\r\n            return this.executeSelect(args).then((data) => {\r\n                let dataItems;\r\n                let totalRowCount;\r\n                if (Array.isArray(data)) {\r\n                    dataItems = data;\r\n                    totalRowCount = data.length;\r\n                }\r\n                else if (data.dataItems !== undefined && data.totalRowCount !== undefined) {\r\n                    dataItems = data.dataItems;\r\n                    totalRowCount = data.totalRowCount;\r\n                }\r\n                else {\r\n                    throw Errors_1.Errors.queryResultTypeError();\r\n                }\r\n                this.selected.fire(this, { totalRowCount, dataItems });\r\n                return { totalRowCount, dataItems };\r\n            }).catch(exc => {\r\n                this.processError(exc, 'select');\r\n                throw exc;\r\n            });\r\n        }\r\n        processError(exc, method) {\r\n            exc.method = method;\r\n            this.error.fire(this, exc);\r\n            if (!exc.handled)\r\n                throw exc;\r\n        }\r\n    }\r\n    exports.DataSource = DataSource;\r\n    class DataSourceSelectArguments {\r\n        constructor() {\r\n            this.startRowIndex = 0;\r\n            this.maximumRows = 2147483647;\r\n        }\r\n    }\r\n    exports.DataSourceSelectArguments = DataSourceSelectArguments;\r\n    class ArrayDataSource extends DataSource {\r\n        constructor(items) {\r\n            super({\r\n                select(args) {\r\n                    return __awaiter(this, void 0, void 0, function* () {\r\n                        if (args.sortExpression) {\r\n                        }\r\n                        let dataItems = items.slice(args.startRowIndex, args.startRowIndex + args.maximumRows);\r\n                        let result = { dataItems, totalRowCount: items.length };\r\n                        return result;\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }\r\n    exports.ArrayDataSource = ArrayDataSource;\r\n});\r\n// }\r\n"],"file":"DataSource.js"}