{"version":3,"sources":["../out/wuzhui.js"],"names":["__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","wuzhui","CONTROL_DATA_NAME","Control","element","Errors","argumentNull","_element","ElementHelper","data","child","index","childElement","placeChild","children","appendChild","insertBefore","applyStyle","isVisible","showElement","hideElement","DataSource","args","inserting","callbacks1","inserted","deleting","callbacks","deleted","updating","updated","selecting","selected","error","primaryKeys","item","insert","delete","update","select","canInsert","dataSourceCanntInsert","fire","executeInsert","Object","assign","catch","exc","processError","canDelete","dataSourceCanntDelete","checkPrimaryKeys","executeDelete","canUpdate","dataSourceCanntUpdate","executeUpdate","theItem","otherItem","length","pk","key","indexOf","primaryKeyNull","console","assert","fireCallback","executeSelect","dataItems","totalRowCount","Array","isArray","undefined","queryResultTypeError","method","handled","DataSourceSelectArguments","startRowIndex","maximumRows","ArrayDataSource","items","sortExpression","slice","parameters","message","Error","paramName","msg","GridViewRowType","findParentElement","parentTagName","toUpperCase","p","parentElement","tagName","GridViewRow","rowType","document","createElement","_rowType","_gridView","gridViewElement","getControlByElement","cells","i","cell","GridViewDataRow","gridView","dataItem","Data","_dataItem","columns","column","createItemCell","visible","GridView","params","emptyDataHTML","initDataHTML","loadFailHTML","rowCreated","showHeader","showFooter","allowPaging","_params","_columns","columnsCanntEmpty","_dataSource","dataSource","add","sender","on_selectExecuted","on_updateExecuted","on_insertExecuted","on_deleteExecuted","display","_emtpyRow","style","innerHTML","onclick","selectArguments","log","stack","_header","appendHeaderRow","_body","appendEmptyRow","pageSize","_footer","appendFooterRow","createPagingBar","pagerSettings","pagingBar","pagingBarContainer","pagingBarElement","className","pagingBarClassName","colSpan","NumberPagingBar","Empty","emptyRowClassName","GridViewCell","emptyDataRowStyle","row","dataRowClassName","j","GridViewDataCell","render","hideEmptyRow","_currentSortCell","clearSortIcon","Header","createHeaderCell","GridViewHeaderCell","sorting","a","on_sort","Footer","createFooterCell","rows","querySelectorAll","removeChild","showEmptyRow","appendDataRow","row_element","isSameItem","dataRowsCount","dataRows","push","dataRow","remove","removeProperty","PagerPosition","PagingBar","_pageIndex","_selectArguments","source","pageIndex","Math","floor","notImplemented","pageCount","ceil","_pageSize","_totalRowCount","pageButtonCount","firstPageText","lastPageText","nextPageText","previousPageText","showTotal","numberButtons","createButton","createPagingButton","createLabel","createTotalLabel","buttonContainer","buttonContainerWraper","buttonContainerClassName","createPreviousButtons","createNumberButtons","createNextButtons","totalElement","init","container","button","href","buttonWrapper","w","_button","Number","getAttribute","valueOf","setAttribute","text","active","removeAttribute","activeButtonClassName","setClassName","buttonClassName","textElement","numberElement","firstPageButton","on_buttonClick","previousPageButton","nextPageButton","lastPageButton","buttonCount","forEach","btn","pagingBarIndex","pagingBarCount","toString","StaticNumberPagingBar","loadData","name","parent","toLowerCase","Callback","funcs","func","filter","o","callback","nullText","dataFormatString","dataField","formatValue","format","arg","open","close","charAt","brace","substring","argFormat","Date","formatDate","formatNumber","y","getFullYear","m","getMonth","d","getDate","h","getHours","M","getMinutes","s","getSeconds","twoDigit","TEN","reg","RegExp","test","num","substr","toFixed","field","ascHTML","descHTML","sortingHTML","toSortHTML","sorted","labelElement","defaultHeaderText","handleSort","_iconElement","updateSortIcon","headerStyle","sortType","headerText","_sortType","DataControlField","footerText","footerStyle","itemStyle","GridViewEditableCell","valueType","_field","_valueType","_mode","readOnly","controlValue","querySelector","controlStyle","BoundField","_valueElement","GridViewCommandCell","CommandField","cancelButtonHTML","deleteButtonHTML","editButtonHTML","updateButtonHTML","newButtonHTML","insertButtonHTML","showEditButton","editButton","createEditButton","marginRight","editButtonClass","addEventListener","on_editButtonClick","updateButton","createUpdateButton","updateButtonClass","on_insertOrUpdateButtonClick","cancelButton","createCancelButton","cancelButtonClass","cacelButton","on_cancelButtonClick","showDeleteButton","deleteButton","createDeleteButton","deleteButtonClass","on_deleteButtonClick","showNewButton","newButton","createNewButton","newButtonClass","on_newButtonClick","insertButton","createInsertButton","insertButtonClass","showButton","hideButton","cellElement","findParentCell","target","rowElement","beginEdit","cancelEdit","findFirstParentByTagName","editableCells","mode","isInsert","rowIndex","endEdit","showReadStatusButtons","newRow","commandCells","c","CustomField"],"mappings":"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","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar wuzhui;\r\n(function (wuzhui) {\r\n    const CONTROL_DATA_NAME = 'Control';\r\n    class Control {\r\n        constructor(element) {\r\n            if (!element)\r\n                throw wuzhui.Errors.argumentNull('element');\r\n            this._element = element;\r\n            wuzhui.ElementHelper.data(element, CONTROL_DATA_NAME, this);\r\n        }\r\n        get visible() {\r\n            return wuzhui.ElementHelper.isVisible(this._element);\r\n        }\r\n        set visible(value) {\r\n            if (value) {\r\n                wuzhui.ElementHelper.showElement(this._element);\r\n            }\r\n            else {\r\n                wuzhui.ElementHelper.hideElement(this._element);\r\n            }\r\n        }\r\n        get element() {\r\n            return this._element;\r\n        }\r\n        appendChild(child, index) {\r\n            if (child == null)\r\n                throw wuzhui.Errors.argumentNull('child');\r\n            let childElement;\r\n            if (child instanceof Control)\r\n                childElement = child.element;\r\n            else\r\n                childElement = child;\r\n            let placeChild;\r\n            if (index != null) {\r\n                placeChild = this.element.children[index];\r\n            }\r\n            if (placeChild == null) {\r\n                this.element.appendChild(childElement);\r\n            }\r\n            else {\r\n                this.element.insertBefore(childElement, placeChild);\r\n            }\r\n        }\r\n        style(value) {\r\n            wuzhui.applyStyle(this.element, value);\r\n        }\r\n        static getControlByElement(element) {\r\n            return wuzhui.ElementHelper.data(element, CONTROL_DATA_NAME);\r\n        }\r\n    }\r\n    wuzhui.Control = Control;\r\n})(wuzhui || (wuzhui = {}));\r\nvar wuzhui;\r\n(function (wuzhui) {\r\n    class DataSource {\r\n        constructor(args) {\r\n            this.inserting = wuzhui.callbacks1();\r\n            this.inserted = wuzhui.callbacks1();\r\n            this.deleting = wuzhui.callbacks();\r\n            this.deleted = wuzhui.callbacks();\r\n            this.updating = wuzhui.callbacks();\r\n            this.updated = wuzhui.callbacks();\r\n            this.selecting = wuzhui.callbacks();\r\n            this.selected = wuzhui.callbacks();\r\n            this.error = wuzhui.callbacks();\r\n            this.args = args;\r\n            this.primaryKeys = args.primaryKeys || [];\r\n        }\r\n        get canDelete() {\r\n            return this.args.delete != null && this.primaryKeys.length > 0;\r\n        }\r\n        get canInsert() {\r\n            return this.args.insert != null && this.primaryKeys.length > 0;\r\n        }\r\n        get canUpdate() {\r\n            return this.args.update != null && this.primaryKeys.length > 0;\r\n        }\r\n        executeInsert(item, args) {\r\n            return this.args.insert(item, args);\r\n        }\r\n        executeDelete(item, args) {\r\n            return this.args.delete(item, args);\r\n        }\r\n        executeUpdate(item, args) {\r\n            return this.args.update(item, args);\r\n        }\r\n        executeSelect(args) {\r\n            return this.args.select(args);\r\n        }\r\n        insert(item, args, index) {\r\n            if (!this.canInsert)\r\n                throw wuzhui.Errors.dataSourceCanntInsert();\r\n            if (!item)\r\n                throw wuzhui.Errors.argumentNull(\"item\");\r\n            if (typeof args == 'number') {\r\n                index = args;\r\n                args = null;\r\n            }\r\n            this.inserting.fire(this, item, index);\r\n            return this.executeInsert(item, args).then((data) => {\r\n                Object.assign(item, data);\r\n                this.inserted.fire(this, item, index);\r\n                return data;\r\n            }).catch(exc => {\r\n                this.processError(exc, 'insert');\r\n                throw exc;\r\n            });\r\n        }\r\n        delete(item, args) {\r\n            if (!this.canDelete)\r\n                throw wuzhui.Errors.dataSourceCanntDelete();\r\n            if (!item)\r\n                throw wuzhui.Errors.argumentNull(\"item\");\r\n            this.checkPrimaryKeys(item);\r\n            this.deleting.fire(this, item);\r\n            return this.executeDelete(item, args).then((data) => {\r\n                this.deleted.fire(this, item);\r\n                return data;\r\n            }).catch(exc => {\r\n                this.processError(exc, 'delete');\r\n                throw exc;\r\n            });\r\n        }\r\n        update(item, args) {\r\n            if (!this.canUpdate)\r\n                throw wuzhui.Errors.dataSourceCanntUpdate();\r\n            if (!item)\r\n                throw wuzhui.Errors.argumentNull(\"item\");\r\n            this.checkPrimaryKeys(item);\r\n            this.updating.fire(this, item);\r\n            return this.executeUpdate(item, args).then((data) => {\r\n                Object.assign(item, data);\r\n                this.updated.fire(this, item);\r\n                return data;\r\n            }).catch((exc) => {\r\n                this.processError(exc, 'update');\r\n                throw exc;\r\n            });\r\n        }\r\n        isSameItem(theItem, otherItem) {\r\n            if (theItem == null)\r\n                throw wuzhui.Errors.argumentNull('theItem');\r\n            if (otherItem == null)\r\n                throw wuzhui.Errors.argumentNull('otherItem');\r\n            if (this.primaryKeys.length == 0)\r\n                return theItem == otherItem;\r\n            this.checkPrimaryKeys(theItem);\r\n            this.checkPrimaryKeys(otherItem);\r\n            for (let pk of this.primaryKeys) {\r\n                if (theItem[pk] != otherItem[pk])\r\n                    return false;\r\n            }\r\n            return true;\r\n        }\r\n        checkPrimaryKeys(item) {\r\n            for (let key in item) {\r\n                if (item[key] == null && this.primaryKeys.indexOf(key) >= 0)\r\n                    throw wuzhui.Errors.primaryKeyNull(key);\r\n            }\r\n        }\r\n        select(args) {\r\n            console.assert(args != null);\r\n            wuzhui.fireCallback(this.selecting, this, args);\r\n            return this.executeSelect(args).then((data) => {\r\n                let dataItems;\r\n                let totalRowCount;\r\n                if (Array.isArray(data)) {\r\n                    dataItems = data;\r\n                    totalRowCount = data.length;\r\n                }\r\n                else if (data.dataItems !== undefined && data.totalRowCount !== undefined) {\r\n                    dataItems = data.dataItems;\r\n                    totalRowCount = data.totalRowCount;\r\n                }\r\n                else {\r\n                    throw wuzhui.Errors.queryResultTypeError();\r\n                }\r\n                this.selected.fire(this, { totalRowCount, dataItems });\r\n                return { totalRowCount, dataItems };\r\n            }).catch(exc => {\r\n                this.processError(exc, 'select');\r\n                throw exc;\r\n            });\r\n        }\r\n        processError(exc, method) {\r\n            exc.method = method;\r\n            this.error.fire(this, exc);\r\n            if (!exc.handled)\r\n                throw exc;\r\n        }\r\n    }\r\n    wuzhui.DataSource = DataSource;\r\n    class DataSourceSelectArguments {\r\n        constructor() {\r\n            this.startRowIndex = 0;\r\n            this.maximumRows = 2147483647;\r\n        }\r\n    }\r\n    wuzhui.DataSourceSelectArguments = DataSourceSelectArguments;\r\n    class ArrayDataSource extends DataSource {\r\n        constructor(items) {\r\n            super({\r\n                select(args) {\r\n                    return __awaiter(this, void 0, void 0, function* () {\r\n                        if (args.sortExpression) {\r\n                        }\r\n                        let dataItems = items.slice(args.startRowIndex, args.startRowIndex + args.maximumRows);\r\n                        let result = { dataItems, totalRowCount: items.length };\r\n                        return result;\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }\r\n    wuzhui.ArrayDataSource = ArrayDataSource;\r\n})(wuzhui || (wuzhui = {}));\r\nvar wuzhui;\r\n(function (wuzhui) {\r\n    class Errors {\r\n        constructor(parameters) {\r\n        }\r\n        static notImplemented(message) {\r\n            message = message || \"Not implemented\";\r\n            return new Error(message);\r\n        }\r\n        static argumentNull(paramName) {\r\n            return new Error(\"Argument '\" + paramName + \"' can not be null.\");\r\n        }\r\n        static controllBelonsAnother() {\r\n            return new Error(\"The control is belongs another control.\");\r\n        }\r\n        static columnsCanntEmpty() {\r\n            return new Error(\"Columns cannt empty.\");\r\n        }\r\n        static dataSourceCanntInsert() {\r\n            return new Error(\"DataSource can not insert.\");\r\n        }\r\n        static dataSourceCanntUpdate() {\r\n            return new Error(\"DataSource can not update.\");\r\n        }\r\n        static dataSourceCanntDelete() {\r\n            return new Error(\"DataSource can not delete.\");\r\n        }\r\n        static primaryKeyNull(key) {\r\n            let msg = `Primary key named '${key}' value is null.`;\r\n            return new Error(msg);\r\n        }\r\n        static queryResultTypeError() {\r\n            let msg = 'Type of the query result is expected as Array or DataSourceSelectResult.';\r\n            return new Error(msg);\r\n        }\r\n    }\r\n    wuzhui.Errors = Errors;\r\n})(wuzhui || (wuzhui = {}));\r\nvar wuzhui;\r\n(function (wuzhui) {\r\n    let GridViewRowType;\r\n    (function (GridViewRowType) {\r\n        GridViewRowType[GridViewRowType[\"Header\"] = 0] = \"Header\";\r\n        GridViewRowType[GridViewRowType[\"Footer\"] = 1] = \"Footer\";\r\n        GridViewRowType[GridViewRowType[\"Data\"] = 2] = \"Data\";\r\n        GridViewRowType[GridViewRowType[\"Paging\"] = 3] = \"Paging\";\r\n        GridViewRowType[GridViewRowType[\"Empty\"] = 4] = \"Empty\";\r\n    })(GridViewRowType = wuzhui.GridViewRowType || (wuzhui.GridViewRowType = {}));\r\n    function findParentElement(element, parentTagName) {\r\n        console.assert(element != null);\r\n        console.assert(parentTagName != null);\r\n        parentTagName = parentTagName.toUpperCase();\r\n        let p = element.parentElement;\r\n        while (p) {\r\n            if (p.tagName == parentTagName)\r\n                return p;\r\n            p = p.parentElement;\r\n        }\r\n    }\r\n    class GridViewRow extends wuzhui.Control {\r\n        constructor(rowType) {\r\n            let element = document.createElement('tr');\r\n            super(element);\r\n            this._rowType = rowType;\r\n        }\r\n        get rowType() {\r\n            return this._rowType;\r\n        }\r\n        get gridView() {\r\n            if (this._gridView == null) {\r\n                let gridViewElement = findParentElement(this.element, 'table');\r\n                console.assert(gridViewElement != null);\r\n                this._gridView = wuzhui.Control.getControlByElement(gridViewElement);\r\n                console.assert(this._gridView != null);\r\n            }\r\n            return this._gridView;\r\n        }\r\n        get cells() {\r\n            let cells = new Array();\r\n            for (let i = 0; i < this.element.cells.length; i++) {\r\n                let cell = wuzhui.Control.getControlByElement(this.element.cells[i]);\r\n                console.assert(cell != null);\r\n                cells[i] = cell;\r\n            }\r\n            return cells;\r\n        }\r\n    }\r\n    wuzhui.GridViewRow = GridViewRow;\r\n    class GridViewDataRow extends GridViewRow {\r\n        constructor(gridView, dataItem) {\r\n            super(GridViewRowType.Data);\r\n            this._dataItem = dataItem;\r\n            for (var i = 0; i < gridView.columns.length; i++) {\r\n                var column = gridView.columns[i];\r\n                var cell = column.createItemCell(dataItem);\r\n                cell.visible = column.visible;\r\n                this.appendChild(cell);\r\n            }\r\n        }\r\n        get dataItem() {\r\n            return this._dataItem;\r\n        }\r\n    }\r\n    wuzhui.GridViewDataRow = GridViewDataRow;\r\n    class GridView extends wuzhui.Control {\r\n        constructor(params) {\r\n            super(params.element || document.createElement('table'));\r\n            this.emptyDataHTML = '';\r\n            this.initDataHTML = '...';\r\n            this.loadFailHTML = '';\r\n            //========================================================\r\n            // \r\n            // headerStyle: string;\r\n            // footerStyle: string;\r\n            // rowStyle: string;\r\n            // alternatingRowStyle: string;\r\n            //private emptyDataRowStyle: string;\r\n            //========================================================\r\n            this.rowCreated = wuzhui.callbacks();\r\n            params = Object.assign({\r\n                showHeader: true, showFooter: false,\r\n                allowPaging: false\r\n            }, params);\r\n            this._params = params;\r\n            this._columns = params.columns || [];\r\n            if (this._columns.length == 0)\r\n                throw wuzhui.Errors.columnsCanntEmpty();\r\n            for (var i = 0; i < this._columns.length; i++) {\r\n                var column = this._columns[i];\r\n                column.gridView = this;\r\n            }\r\n            this._dataSource = params.dataSource;\r\n            this._dataSource.selected.add((sender, e) => this.on_selectExecuted(e.dataItems));\r\n            this._dataSource.updated.add((sender, item) => this.on_updateExecuted(item));\r\n            this._dataSource.inserted.add((sender, item, index) => this.on_insertExecuted(item, index));\r\n            this._dataSource.deleted.add((sender, item) => this.on_deleteExecuted(item));\r\n            this._dataSource.selecting.add((sender, e) => {\r\n                let display = this._emtpyRow.element.style.display;\r\n                if (display != 'none') {\r\n                    this._emtpyRow.element.cells[0].innerHTML = this.initDataHTML;\r\n                }\r\n            });\r\n            this._dataSource.error.add((sender, e) => {\r\n                if (e.method == 'select') {\r\n                    this.on_selectExecuted([]);\r\n                    var element = this._emtpyRow.cells[0].element;\r\n                    element.innerHTML = this.loadFailHTML;\r\n                    element.onclick = () => {\r\n                        this._dataSource.select(this.selectArguments);\r\n                    };\r\n                    e.handled = true;\r\n                    console.error(e.message);\r\n                    console.log(e.stack);\r\n                }\r\n            });\r\n            if (params.showHeader) {\r\n                this._header = new wuzhui.Control(document.createElement('thead'));\r\n                this.appendChild(this._header);\r\n                this.appendHeaderRow();\r\n            }\r\n            this.emptyDataHTML = params.emptyDataHTML || this.emptyDataHTML;\r\n            this.initDataHTML = params.initDataHTML || this.initDataHTML;\r\n            this._body = new wuzhui.Control(document.createElement('tbody'));\r\n            this.appendChild(this._body);\r\n            this.appendEmptyRow();\r\n            let allowPaging = params.pageSize;\r\n            if (params.showFooter || allowPaging) {\r\n                this._footer = new wuzhui.Control(document.createElement('tfoot'));\r\n                this.appendChild(this._footer);\r\n                if (params.showFooter)\r\n                    this.appendFooterRow();\r\n                if (allowPaging) {\r\n                    this.createPagingBar(params.pagerSettings);\r\n                    this.pagingBar.selectArguments.maximumRows = params.pageSize;\r\n                }\r\n            }\r\n            this.selectArguments = this.pagingBar ? this.pagingBar.selectArguments : new wuzhui.DataSourceSelectArguments();\r\n            this.dataSource.select(this.selectArguments);\r\n        }\r\n        createPagingBar(pagerSettings) {\r\n            var pagingBarContainer = document.createElement('tr');\r\n            var pagingBarElement = document.createElement('td');\r\n            pagingBarElement.className = GridView.pagingBarClassName;\r\n            pagingBarElement.colSpan = this.columns.length;\r\n            pagingBarContainer.appendChild(pagingBarElement);\r\n            console.assert(this._footer != null);\r\n            this._footer.appendChild(pagingBarContainer);\r\n            this.pagingBar = new wuzhui.NumberPagingBar({ dataSource: this.dataSource, element: pagingBarElement, pagerSettings });\r\n        }\r\n        get columns() {\r\n            return this._columns;\r\n        }\r\n        get dataSource() {\r\n            return this._dataSource;\r\n        }\r\n        appendEmptyRow() {\r\n            this._emtpyRow = new GridViewRow(GridViewRowType.Empty);\r\n            this._emtpyRow.element.className = GridView.emptyRowClassName;\r\n            let cell = new wuzhui.GridViewCell();\r\n            cell.element.colSpan = this.columns.length;\r\n            if (!this._params.emptyDataRowStyle) {\r\n                wuzhui.applyStyle(cell.element, this._params.emptyDataRowStyle);\r\n            }\r\n            this._emtpyRow.appendChild(cell);\r\n            this._body.appendChild(this._emtpyRow);\r\n            wuzhui.fireCallback(this.rowCreated, this, { row: this._emtpyRow });\r\n        }\r\n        appendDataRow(dataItem, index) {\r\n            var row = new GridViewDataRow(this, dataItem);\r\n            row.element.className = GridView.dataRowClassName;\r\n            this._body.appendChild(row, index);\r\n            let cells = row.cells;\r\n            for (let j = 0; j < cells.length; j++) {\r\n                let cell = cells[j];\r\n                if (cell instanceof wuzhui.GridViewDataCell) {\r\n                    cell.render(dataItem);\r\n                }\r\n            }\r\n            wuzhui.fireCallback(this.rowCreated, this, { row });\r\n            if (this._emtpyRow.element.style.display != 'none')\r\n                this.hideEmptyRow();\r\n            return row;\r\n        }\r\n        on_sort(sender, args) {\r\n            if (this._currentSortCell != null && this._currentSortCell != sender) {\r\n                this._currentSortCell.clearSortIcon();\r\n            }\r\n            this._currentSortCell = sender;\r\n        }\r\n        appendHeaderRow() {\r\n            var row = new GridViewRow(GridViewRowType.Header);\r\n            for (var i = 0; i < this.columns.length; i++) {\r\n                var column = this.columns[i];\r\n                let cell = column.createHeaderCell();\r\n                if (cell instanceof wuzhui.GridViewHeaderCell) {\r\n                    cell.sorting.add((e, a) => this.on_sort(e, a));\r\n                }\r\n                row.appendChild(cell);\r\n                cell.visible = this.columns[i].visible;\r\n            }\r\n            this._header.appendChild(row);\r\n        }\r\n        appendFooterRow() {\r\n            var row = new GridViewRow(GridViewRowType.Footer);\r\n            for (var i = 0; i < this.columns.length; i++) {\r\n                var column = this.columns[i];\r\n                let cell = column.createFooterCell();\r\n                row.appendChild(cell);\r\n                cell.visible = column.visible;\r\n            }\r\n            this._footer.appendChild(row);\r\n        }\r\n        on_selectExecuted(items) {\r\n            var rows = this._body.element.querySelectorAll(`.${GridView.dataRowClassName}`);\r\n            for (let i = 0; i < rows.length; i++)\r\n                this._body.element.removeChild(rows[i]);\r\n            if (items.length == 0) {\r\n                this.showEmptyRow();\r\n                return;\r\n            }\r\n            for (let i = 0; i < items.length; i++) {\r\n                this.appendDataRow(items[i]);\r\n            }\r\n        }\r\n        on_updateExecuted(item) {\r\n            console.assert(item != null);\r\n            for (let i = 0; i < this._body.element.rows.length; i++) {\r\n                let row_element = this._body.element.rows[i];\r\n                let row = wuzhui.Control.getControlByElement(row_element);\r\n                ;\r\n                if (!(row instanceof GridViewDataRow))\r\n                    continue;\r\n                let dataItem = row.dataItem;\r\n                if (!this.dataSource.isSameItem(dataItem, item))\r\n                    continue;\r\n                if (dataItem != item) {\r\n                    Object.assign(dataItem, item);\r\n                }\r\n                let cells = row.cells;\r\n                for (let j = 0; j < cells.length; j++) {\r\n                    let cell = cells[j];\r\n                    if (cell instanceof wuzhui.GridViewDataCell) {\r\n                        // let value = cell.dataField ? item[cell.dataField] : item;\r\n                        // let value = Object.assign({}, dataItem, item);\r\n                        cell.render(dataItem);\r\n                        // if (cell.dataField)\r\n                        //     dataItem[cell.dataField] = value;\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n        }\r\n        on_insertExecuted(item, index) {\r\n            if (index == null)\r\n                index = 0;\r\n            this.appendDataRow(item, index);\r\n        }\r\n        on_deleteExecuted(item) {\r\n            let dataRowsCount = 0;\r\n            let rows = this._body.element.rows;\r\n            let dataRows = new Array();\r\n            for (let i = 0; i < rows.length; i++) {\r\n                let row = wuzhui.Control.getControlByElement(rows.item(i));\r\n                if ((row instanceof GridViewDataRow))\r\n                    dataRows.push(row);\r\n            }\r\n            for (let i = 0; i < dataRows.length; i++) {\r\n                let dataRow = dataRows[i];\r\n                if (!this.dataSource.isSameItem(item, dataRow.dataItem))\r\n                    continue;\r\n                dataRow.element.remove();\r\n                if (dataRows.length == 1)\r\n                    this.showEmptyRow();\r\n            }\r\n        }\r\n        showEmptyRow() {\r\n            this._emtpyRow.element.cells[0].innerHTML = this.emptyDataHTML;\r\n            this._emtpyRow.element.style.removeProperty('display');\r\n        }\r\n        hideEmptyRow() {\r\n            this._emtpyRow.element.style.display = 'none';\r\n        }\r\n    }\r\n    GridView.emptyRowClassName = 'empty';\r\n    GridView.dataRowClassName = 'data';\r\n    GridView.pagingBarClassName = 'pagingBar';\r\n    wuzhui.GridView = GridView;\r\n})(wuzhui || (wuzhui = {}));\r\nvar wuzhui;\r\n(function (wuzhui) {\r\n    let PagerPosition;\r\n    (function (PagerPosition) {\r\n        PagerPosition[PagerPosition[\"Bottom\"] = 0] = \"Bottom\";\r\n        PagerPosition[PagerPosition[\"Top\"] = 1] = \"Top\";\r\n        PagerPosition[PagerPosition[\"TopAndBottom\"] = 2] = \"TopAndBottom\";\r\n    })(PagerPosition = wuzhui.PagerPosition || (wuzhui.PagerPosition = {}));\r\n    ;\r\n    class PagingBar {\r\n        init(dataSource, selectArguments) {\r\n            // if (dataSource == null)\r\n            //     throw Errors.argumentNull('dataSource');\r\n            this._pageIndex = 0;\r\n            this._selectArguments = selectArguments || new wuzhui.DataSourceSelectArguments();\r\n            var pagingBar = this;\r\n            pagingBar.totalRowCount = 1000000;\r\n            if (dataSource) {\r\n                dataSource.selected.add((source, args) => {\r\n                    pagingBar.pageSize = this._selectArguments.maximumRows;\r\n                    var totalRowCount = args.totalRowCount;\r\n                    if (totalRowCount != null && totalRowCount >= 0) {\r\n                        pagingBar.totalRowCount = totalRowCount;\r\n                    }\r\n                    var startRowIndex = this._selectArguments.startRowIndex;\r\n                    if (startRowIndex == null || startRowIndex <= 0)\r\n                        startRowIndex = 0;\r\n                    pagingBar.pageIndex = Math.floor(startRowIndex / pagingBar.pageSize);\r\n                    pagingBar.render();\r\n                });\r\n                dataSource.deleted.add(function () {\r\n                    pagingBar.totalRowCount = pagingBar.totalRowCount - 1;\r\n                    pagingBar.render();\r\n                });\r\n                dataSource.inserted.add(function () {\r\n                    pagingBar.totalRowCount = pagingBar.totalRowCount + 1;\r\n                    pagingBar.render();\r\n                });\r\n            }\r\n        }\r\n        get selectArguments() {\r\n            return this._selectArguments;\r\n        }\r\n        get pageCount() {\r\n            var pageCount = Math.ceil(this.totalRowCount / this.pageSize);\r\n            return pageCount;\r\n        }\r\n        get pageSize() {\r\n            return this._pageSize;\r\n        }\r\n        set pageSize(value) {\r\n            this._pageSize = value;\r\n        }\r\n        get pageIndex() {\r\n            return this._pageIndex;\r\n        }\r\n        set pageIndex(value) {\r\n            this._pageIndex = value;\r\n        }\r\n        get totalRowCount() {\r\n            return this._totalRowCount;\r\n        }\r\n        set totalRowCount(value) {\r\n            this._totalRowCount = value;\r\n        }\r\n        // Virtual Method\r\n        render() {\r\n            throw wuzhui.Errors.notImplemented('The table-row render method is not implemented.');\r\n        }\r\n    }\r\n    wuzhui.PagingBar = PagingBar;\r\n    class NumberPagingBar extends PagingBar {\r\n        constructor(params) {\r\n            if (!params.dataSource)\r\n                throw wuzhui.Errors.argumentNull('dataSource');\r\n            if (!params.element)\r\n                throw wuzhui.Errors.argumentNull('element');\r\n            let pagerSettings = Object.assign({\r\n                pageButtonCount: 10,\r\n                firstPageText: '<<',\r\n                lastPageText: '>>',\r\n                nextPageText: '...',\r\n                previousPageText: '...',\r\n                showTotal: true,\r\n            }, params.pagerSettings || {});\r\n            super();\r\n            this.dataSource = params.dataSource;\r\n            this.pagerSettings = pagerSettings;\r\n            this.element = params.element;\r\n            this.numberButtons = new Array();\r\n            this.createButton = this.createPagingButton;\r\n            this.createLabel = this.createTotalLabel;\r\n            let buttonContainer = pagerSettings.buttonContainerWraper ?\r\n                document.createElement(pagerSettings.buttonContainerWraper) :\r\n                document.createElement('div');\r\n            buttonContainer.className = pagerSettings.buttonContainerClassName || \"buttons\";\r\n            this.element.appendChild(buttonContainer);\r\n            this.createPreviousButtons(buttonContainer);\r\n            this.createNumberButtons(buttonContainer);\r\n            this.createNextButtons(buttonContainer);\r\n            if (this.pagerSettings.showTotal) {\r\n                this.totalElement = this.createLabel();\r\n                this.totalElement.visible = false;\r\n            }\r\n            this.init(params.dataSource, params.selectArguments);\r\n        }\r\n        createPagingButton(container) {\r\n            var pagerSettings = this.pagerSettings;\r\n            let button = document.createElement('a');\r\n            button.href = 'javascript:';\r\n            if (this.pagerSettings.buttonWrapper) {\r\n                let w = document.createElement(this.pagerSettings.buttonWrapper);\r\n                w.appendChild(button);\r\n                container.appendChild(w);\r\n            }\r\n            else {\r\n                container.appendChild(button);\r\n            }\r\n            let result = {\r\n                _button: button,\r\n                get visible() {\r\n                    let button = this._button;\r\n                    return button.style.display != 'none';\r\n                },\r\n                set visible(value) {\r\n                    let button = this._button;\r\n                    let element = pagerSettings.buttonWrapper ? button.parentElement : button;\r\n                    if (value) {\r\n                        element.style.removeProperty('display');\r\n                    }\r\n                    else {\r\n                        element.style.display = 'none';\r\n                    }\r\n                },\r\n                get pageIndex() {\r\n                    let button = this._button;\r\n                    return new Number(button.getAttribute('pageIndex')).valueOf();\r\n                },\r\n                set pageIndex(value) {\r\n                    let button = this._button;\r\n                    button.setAttribute('pageIndex', value);\r\n                },\r\n                get text() {\r\n                    let button = this._button;\r\n                    return button.innerHTML;\r\n                },\r\n                set text(value) {\r\n                    let button = this._button;\r\n                    button.innerHTML = value;\r\n                },\r\n                get active() {\r\n                    let button = this._button;\r\n                    return button.href != null;\r\n                },\r\n                set active(value) {\r\n                    let button = this._button;\r\n                    if (value == true) {\r\n                        button.removeAttribute('href');\r\n                        if (pagerSettings.activeButtonClassName) {\r\n                            // button.className = pagerSettings.activeButtonClassName;\r\n                            this.setClassName(pagerSettings.activeButtonClassName);\r\n                        }\r\n                        return;\r\n                    }\r\n                    button.href = 'javascript:';\r\n                    if (pagerSettings.buttonClassName)\r\n                        this.setClassName(pagerSettings.buttonClassName);\r\n                    else\r\n                        this.setClassName(null);\r\n                },\r\n                setClassName(value) {\r\n                    let button = this._button;\r\n                    let element = pagerSettings.buttonWrapper ? button.parentElement : button;\r\n                    if (value)\r\n                        element.className = value;\r\n                    else\r\n                        element.removeAttribute('class');\r\n                },\r\n                onclick: null\r\n            };\r\n            button.onclick = () => {\r\n                if (result.onclick) {\r\n                    result.onclick(result, this);\r\n                }\r\n            };\r\n            return result;\r\n        }\r\n        createTotalLabel() {\r\n            let totalElement = document.createElement('div');\r\n            totalElement.className = 'total';\r\n            let textElement = document.createElement('span');\r\n            textElement.className = 'text';\r\n            textElement.innerHTML = '';\r\n            totalElement.appendChild(textElement);\r\n            let numberElement = document.createElement('span');\r\n            numberElement.className = 'number';\r\n            totalElement.appendChild(numberElement);\r\n            this.element.appendChild(totalElement);\r\n            return {\r\n                get text() {\r\n                    return numberElement.innerHTML;\r\n                },\r\n                set text(value) {\r\n                    numberElement.innerHTML = value;\r\n                },\r\n                get visible() {\r\n                    let display = totalElement.style.display;\r\n                    return display != 'none';\r\n                },\r\n                set visible(value) {\r\n                    if (value == true)\r\n                        totalElement.style.display = 'block';\r\n                    else\r\n                        totalElement.style.display = 'node';\r\n                }\r\n            };\r\n        }\r\n        createPreviousButtons(buttonContainer) {\r\n            this.firstPageButton = this.createButton(buttonContainer);\r\n            this.firstPageButton.onclick = NumberPagingBar.on_buttonClick;\r\n            this.firstPageButton.text = this.pagerSettings.firstPageText;\r\n            this.firstPageButton.visible = false;\r\n            this.previousPageButton = this.createButton(buttonContainer);\r\n            this.previousPageButton.onclick = NumberPagingBar.on_buttonClick;\r\n            this.previousPageButton.text = this.pagerSettings.previousPageText;\r\n            this.previousPageButton.visible = false;\r\n        }\r\n        createNextButtons(buttonContainer) {\r\n            this.nextPageButton = this.createButton(buttonContainer);\r\n            this.nextPageButton.onclick = NumberPagingBar.on_buttonClick;\r\n            this.nextPageButton.text = this.pagerSettings.nextPageText;\r\n            this.nextPageButton.visible = false;\r\n            this.lastPageButton = this.createButton(buttonContainer);\r\n            this.lastPageButton.onclick = NumberPagingBar.on_buttonClick;\r\n            this.lastPageButton.text = this.pagerSettings.lastPageText;\r\n            this.lastPageButton.visible = false;\r\n        }\r\n        createNumberButtons(buttonContainer) {\r\n            let pagingBar = this;\r\n            let buttonCount = this.pagerSettings.pageButtonCount;\r\n            for (let i = 0; i < buttonCount; i++) {\r\n                let button = this.createButton(buttonContainer);\r\n                button.onclick = NumberPagingBar.on_buttonClick;\r\n                this.numberButtons[i] = button;\r\n            }\r\n            this.numberButtons.forEach(btn => {\r\n                btn.onclick = () => NumberPagingBar.on_buttonClick(btn, pagingBar);\r\n            });\r\n        }\r\n        static on_buttonClick(button, pagingBar) {\r\n            let pageIndex = button.pageIndex;\r\n            if (!pageIndex == null) {\r\n                return;\r\n            }\r\n            let args = pagingBar.selectArguments;\r\n            args.maximumRows = pagingBar.pageSize;\r\n            args.startRowIndex = pageIndex * pagingBar.pageSize;\r\n            pagingBar.pageIndex = pageIndex;\r\n            pagingBar.dataSource.select(pagingBar.selectArguments);\r\n        }\r\n        render() {\r\n            var pagerSettings = this.pagerSettings;\r\n            var buttonCount = pagerSettings.pageButtonCount;\r\n            let pagingBarIndex = Math.floor(this.pageIndex / buttonCount);\r\n            let pagingBarCount = Math.ceil(this.pageCount / buttonCount);\r\n            this.previousPageButton.pageIndex = (pagingBarIndex - 1) * buttonCount;\r\n            this.nextPageButton.pageIndex = (pagingBarIndex + 1) * buttonCount;\r\n            this.firstPageButton.pageIndex = 0;\r\n            this.lastPageButton.pageIndex = this.pageCount - 1;\r\n            for (let i = 0; i < this.numberButtons.length; i++) {\r\n                let pageIndex = pagingBarIndex * buttonCount + i;\r\n                if (pageIndex < this.pageCount) {\r\n                    this.numberButtons[i].pageIndex = pageIndex;\r\n                    this.numberButtons[i].text = (pagingBarIndex * buttonCount + i + 1).toString();\r\n                    this.numberButtons[i].visible = true;\r\n                    this.numberButtons[i].active = pageIndex == this.pageIndex;\r\n                }\r\n                else {\r\n                    this.numberButtons[i].visible = false;\r\n                }\r\n            }\r\n            if (this.totalElement) {\r\n                this.totalElement.text = this.totalRowCount;\r\n                this.totalElement.visible = true;\r\n            }\r\n            this.firstPageButton.visible = false;\r\n            this.previousPageButton.visible = false;\r\n            this.lastPageButton.visible = false;\r\n            this.nextPageButton.visible = false;\r\n            if (pagingBarIndex > 0) {\r\n                this.firstPageButton.visible = true;\r\n                this.previousPageButton.visible = true;\r\n            }\r\n            if (pagingBarIndex < pagingBarCount - 1) {\r\n                this.lastPageButton.visible = true;\r\n                this.nextPageButton.visible = true;\r\n            }\r\n        }\r\n    }\r\n    wuzhui.NumberPagingBar = NumberPagingBar;\r\n    class StaticNumberPagingBar extends PagingBar {\r\n        constructor(params) {\r\n            if (!params.loadData)\r\n                throw wuzhui.Errors.argumentNull('loadData');\r\n            if (!params.element)\r\n                throw wuzhui.Errors.argumentNull('element');\r\n            let pagerSettings = Object.assign({\r\n                pageButtonCount: 10,\r\n                firstPageText: '<<',\r\n                lastPageText: '>>',\r\n                nextPageText: '...',\r\n                previousPageText: '...',\r\n                showTotal: true,\r\n            }, params.pagerSettings || {});\r\n            super();\r\n            this.loadData = params.loadData;\r\n            this.pagerSettings = pagerSettings;\r\n            this.element = params.element;\r\n            this.numberButtons = new Array();\r\n            this.createButton = this.createPagingButton;\r\n            this.createLabel = this.createTotalLabel;\r\n            let buttonContainer = pagerSettings.buttonContainerWraper ?\r\n                document.createElement(pagerSettings.buttonContainerWraper) :\r\n                document.createElement('div');\r\n            buttonContainer.className = pagerSettings.buttonContainerClassName || \"buttons\";\r\n            this.element.appendChild(buttonContainer);\r\n            this.createPreviousButtons(buttonContainer);\r\n            this.createNumberButtons(buttonContainer);\r\n            this.createNextButtons(buttonContainer);\r\n            if (this.pagerSettings.showTotal) {\r\n                this.totalElement = this.createLabel();\r\n                this.totalElement.visible = false;\r\n            }\r\n            this.init(null, params.selectArguments);\r\n        }\r\n        createPagingButton(container) {\r\n            var pagerSettings = this.pagerSettings;\r\n            let button = document.createElement('a');\r\n            button.href = 'javascript:';\r\n            if (this.pagerSettings.buttonWrapper) {\r\n                let w = document.createElement(this.pagerSettings.buttonWrapper);\r\n                w.appendChild(button);\r\n                container.appendChild(w);\r\n            }\r\n            else {\r\n                container.appendChild(button);\r\n            }\r\n            let result = {\r\n                _button: button,\r\n                get visible() {\r\n                    let button = this._button;\r\n                    return button.style.display != 'none';\r\n                },\r\n                set visible(value) {\r\n                    let button = this._button;\r\n                    let element = pagerSettings.buttonWrapper ? button.parentElement : button;\r\n                    if (value) {\r\n                        element.style.removeProperty('display');\r\n                    }\r\n                    else {\r\n                        element.style.display = 'none';\r\n                    }\r\n                },\r\n                get pageIndex() {\r\n                    let button = this._button;\r\n                    return new Number(button.getAttribute('pageIndex')).valueOf();\r\n                },\r\n                set pageIndex(value) {\r\n                    let button = this._button;\r\n                    button.setAttribute('pageIndex', value);\r\n                },\r\n                get text() {\r\n                    let button = this._button;\r\n                    return button.innerHTML;\r\n                },\r\n                set text(value) {\r\n                    let button = this._button;\r\n                    button.innerHTML = value;\r\n                },\r\n                get active() {\r\n                    let button = this._button;\r\n                    return button.href != null;\r\n                },\r\n                set active(value) {\r\n                    let button = this._button;\r\n                    if (value == true) {\r\n                        button.removeAttribute('href');\r\n                        if (pagerSettings.activeButtonClassName) {\r\n                            // button.className = pagerSettings.activeButtonClassName;\r\n                            this.setClassName(pagerSettings.activeButtonClassName);\r\n                        }\r\n                        return;\r\n                    }\r\n                    button.href = 'javascript:';\r\n                    if (pagerSettings.buttonClassName)\r\n                        this.setClassName(pagerSettings.buttonClassName);\r\n                    else\r\n                        this.setClassName(null);\r\n                },\r\n                setClassName(value) {\r\n                    let button = this._button;\r\n                    let element = pagerSettings.buttonWrapper ? button.parentElement : button;\r\n                    if (value)\r\n                        element.className = value;\r\n                    else\r\n                        element.removeAttribute('class');\r\n                },\r\n                onclick: null\r\n            };\r\n            button.onclick = () => {\r\n                if (result.onclick) {\r\n                    result.onclick(result, this);\r\n                }\r\n            };\r\n            return result;\r\n        }\r\n        createTotalLabel() {\r\n            let totalElement = document.createElement('div');\r\n            totalElement.className = 'total';\r\n            let textElement = document.createElement('span');\r\n            textElement.className = 'text';\r\n            textElement.innerHTML = '';\r\n            totalElement.appendChild(textElement);\r\n            let numberElement = document.createElement('span');\r\n            numberElement.className = 'number';\r\n            totalElement.appendChild(numberElement);\r\n            this.element.appendChild(totalElement);\r\n            return {\r\n                get text() {\r\n                    return numberElement.innerHTML;\r\n                },\r\n                set text(value) {\r\n                    numberElement.innerHTML = value;\r\n                },\r\n                get visible() {\r\n                    let display = totalElement.style.display;\r\n                    return display != 'none';\r\n                },\r\n                set visible(value) {\r\n                    if (value == true)\r\n                        totalElement.style.display = 'block';\r\n                    else\r\n                        totalElement.style.display = 'node';\r\n                }\r\n            };\r\n        }\r\n        createPreviousButtons(buttonContainer) {\r\n            this.firstPageButton = this.createButton(buttonContainer);\r\n            this.firstPageButton.onclick = StaticNumberPagingBar.on_buttonClick;\r\n            this.firstPageButton.text = this.pagerSettings.firstPageText;\r\n            this.firstPageButton.visible = false;\r\n            this.previousPageButton = this.createButton(buttonContainer);\r\n            this.previousPageButton.onclick = StaticNumberPagingBar.on_buttonClick;\r\n            this.previousPageButton.text = this.pagerSettings.previousPageText;\r\n            this.previousPageButton.visible = false;\r\n        }\r\n        createNextButtons(buttonContainer) {\r\n            this.nextPageButton = this.createButton(buttonContainer);\r\n            this.nextPageButton.onclick = StaticNumberPagingBar.on_buttonClick;\r\n            this.nextPageButton.text = this.pagerSettings.nextPageText;\r\n            this.nextPageButton.visible = false;\r\n            this.lastPageButton = this.createButton(buttonContainer);\r\n            this.lastPageButton.onclick = StaticNumberPagingBar.on_buttonClick;\r\n            this.lastPageButton.text = this.pagerSettings.lastPageText;\r\n            this.lastPageButton.visible = false;\r\n        }\r\n        createNumberButtons(buttonContainer) {\r\n            let pagingBar = this;\r\n            let buttonCount = this.pagerSettings.pageButtonCount;\r\n            for (let i = 0; i < buttonCount; i++) {\r\n                let button = this.createButton(buttonContainer);\r\n                button.onclick = StaticNumberPagingBar.on_buttonClick;\r\n                this.numberButtons[i] = button;\r\n            }\r\n            this.numberButtons.forEach(btn => {\r\n                btn.onclick = () => StaticNumberPagingBar.on_buttonClick(btn, pagingBar);\r\n            });\r\n        }\r\n        static on_buttonClick(button, pagingBar) {\r\n            let pageIndex = button.pageIndex;\r\n            if (!pageIndex == null) {\r\n                return;\r\n            }\r\n            let args = pagingBar.selectArguments;\r\n            args.maximumRows = pagingBar.pageSize;\r\n            args.startRowIndex = pageIndex * pagingBar.pageSize;\r\n            pagingBar.pageIndex = pageIndex;\r\n            //pagingBar.dataSource.select(pagingBar.selectArguments);\r\n            pagingBar.loadData(pageIndex);\r\n        }\r\n        render() {\r\n            var pagerSettings = this.pagerSettings;\r\n            var buttonCount = pagerSettings.pageButtonCount;\r\n            let pagingBarIndex = Math.floor(this.pageIndex / buttonCount);\r\n            let pagingBarCount = Math.ceil(this.pageCount / buttonCount);\r\n            this.previousPageButton.pageIndex = (pagingBarIndex - 1) * buttonCount;\r\n            this.nextPageButton.pageIndex = (pagingBarIndex + 1) * buttonCount;\r\n            this.firstPageButton.pageIndex = 0;\r\n            this.lastPageButton.pageIndex = this.pageCount - 1;\r\n            for (let i = 0; i < this.numberButtons.length; i++) {\r\n                let pageIndex = pagingBarIndex * buttonCount + i;\r\n                if (pageIndex < this.pageCount) {\r\n                    this.numberButtons[i].pageIndex = pageIndex;\r\n                    this.numberButtons[i].text = (pagingBarIndex * buttonCount + i + 1).toString();\r\n                    this.numberButtons[i].visible = true;\r\n                    this.numberButtons[i].active = pageIndex == this.pageIndex;\r\n                }\r\n                else {\r\n                    this.numberButtons[i].visible = false;\r\n                }\r\n            }\r\n            if (this.totalElement) {\r\n                this.totalElement.text = this.totalRowCount;\r\n                this.totalElement.visible = true;\r\n            }\r\n            this.firstPageButton.visible = false;\r\n            this.previousPageButton.visible = false;\r\n            this.lastPageButton.visible = false;\r\n            this.nextPageButton.visible = false;\r\n            if (pagingBarIndex > 0) {\r\n                this.firstPageButton.visible = true;\r\n                this.previousPageButton.visible = true;\r\n            }\r\n            if (pagingBarIndex < pagingBarCount - 1) {\r\n                this.lastPageButton.visible = true;\r\n                this.nextPageButton.visible = true;\r\n            }\r\n        }\r\n    }\r\n    wuzhui.StaticNumberPagingBar = StaticNumberPagingBar;\r\n})(wuzhui || (wuzhui = {}));\r\nvar wuzhui;\r\n(function (wuzhui) {\r\n    class ElementHelper {\r\n        static showElement(element) {\r\n            if (!element)\r\n                throw wuzhui.Errors.argumentNull('element');\r\n            element.style.removeProperty('display');\r\n        }\r\n        static hideElement(element) {\r\n            if (!element)\r\n                throw wuzhui.Errors.argumentNull('element');\r\n            element.style.display = 'none';\r\n        }\r\n        static isVisible(element) {\r\n            let { display } = element.style;\r\n            return !display || display != 'none';\r\n        }\r\n        static data(element, name, value) {\r\n            element['data'] = element['data'] || {};\r\n            if (value == null)\r\n                return element['data'].name;\r\n            element['data'].name = value;\r\n        }\r\n        static findFirstParentByTagName(element, tagName) {\r\n            if (element == null)\r\n                throw wuzhui.Errors.argumentNull(\"element\");\r\n            if (!tagName)\r\n                throw wuzhui.Errors.argumentNull('tagName');\r\n            let parent = element.parentElement;\r\n            while (parent != null) {\r\n                if (parent.tagName.toLowerCase() == tagName.toLowerCase()) {\r\n                    return parent;\r\n                }\r\n                parent = parent.parentElement;\r\n            }\r\n            return null;\r\n        }\r\n    }\r\n    wuzhui.ElementHelper = ElementHelper;\r\n    function applyStyle(element, value) {\r\n        let style = value || '';\r\n        if (typeof style == 'string') {\r\n            element.setAttribute('style', style);\r\n        }\r\n        else {\r\n            for (let key in style) {\r\n                element.style[key] = style[key];\r\n            }\r\n        }\r\n    }\r\n    wuzhui.applyStyle = applyStyle;\r\n    class Callback {\r\n        constructor() {\r\n            this.funcs = new Array();\r\n        }\r\n        add(func) {\r\n            this.funcs.push(func);\r\n        }\r\n        remove(func) {\r\n            this.funcs = this.funcs.filter(o => o != func);\r\n        }\r\n        fire(...args) {\r\n            this.funcs.forEach(o => o(...args));\r\n        }\r\n    }\r\n    wuzhui.Callback = Callback;\r\n    function callbacks() {\r\n        return new Callback();\r\n    }\r\n    wuzhui.callbacks = callbacks;\r\n    function callbacks1() {\r\n        return new Callback();\r\n    }\r\n    wuzhui.callbacks1 = callbacks1;\r\n    function fireCallback(callback, ...args) {\r\n        callback.fire(...args);\r\n    }\r\n    wuzhui.fireCallback = fireCallback;\r\n})(wuzhui || (wuzhui = {}));\r\n/// <reference path=\"../Control.ts\"/>\r\nvar wuzhui;\r\n(function (wuzhui) {\r\n    class GridViewCell extends wuzhui.Control {\r\n        constructor() {\r\n            super(document.createElement('td'));\r\n        }\r\n    }\r\n    wuzhui.GridViewCell = GridViewCell;\r\n    class GridViewDataCell extends GridViewCell {\r\n        constructor(params) {\r\n            super();\r\n            let p = params;\r\n            this.nullText = p.nullText != null ? p.nullText : '';\r\n            this.dataFormatString = p.dataFormatString;\r\n            this.dataField = p.dataField;\r\n            if (p.render) {\r\n                this.render = (dataItem) => p.render.apply(this, [dataItem, this.element]);\r\n            }\r\n        }\r\n        render(dataItem) {\r\n            let value = dataItem[this.dataField];\r\n            var text;\r\n            if (value == null)\r\n                text = this.nullText;\r\n            else if (this.dataFormatString)\r\n                text = this.formatValue(this.dataFormatString, value);\r\n            else\r\n                text = `${value}`;\r\n            this.element.innerHTML = text;\r\n        }\r\n        formatValue(format, arg) {\r\n            var result = '';\r\n            for (var i = 0;;) {\r\n                var open = format.indexOf('{', i);\r\n                var close = format.indexOf('}', i);\r\n                if ((open < 0) && (close < 0)) {\r\n                    result += format.slice(i);\r\n                    break;\r\n                }\r\n                if ((close > 0) && ((close < open) || (open < 0))) {\r\n                    if (format.charAt(close + 1) !== '}') {\r\n                        throw new Error('Sys.Res.stringFormatBraceMismatch');\r\n                    }\r\n                    result += format.slice(i, close + 1);\r\n                    i = close + 2;\r\n                    continue;\r\n                }\r\n                result += format.slice(i, open);\r\n                i = open + 1;\r\n                if (format.charAt(i) === '{') {\r\n                    result += '{';\r\n                    i++;\r\n                    continue;\r\n                }\r\n                if (close < 0)\r\n                    throw new Error('Sys.Res.stringFormatBraceMismatch');\r\n                var brace = format.substring(i, close);\r\n                var argFormat = brace;\r\n                if (typeof (arg) === \"undefined\" || arg === null) {\r\n                    arg = '';\r\n                }\r\n                if (arg instanceof Date)\r\n                    result = result + this.formatDate(arg, argFormat);\r\n                else if (arg instanceof Number || typeof arg == 'number')\r\n                    result = result + this.formatNumber(arg, argFormat);\r\n                else\r\n                    result = result + arg.toString();\r\n                i = close + 1;\r\n            }\r\n            return result;\r\n        }\r\n        formatDate(value, format) {\r\n            let y = value.getFullYear();\r\n            let m = value.getMonth() + 1;\r\n            let d = value.getDate();\r\n            let h = value.getHours();\r\n            let M = value.getMinutes();\r\n            let s = value.getSeconds();\r\n            let twoDigit = function (value) {\r\n                const TEN = 10;\r\n                if (value < TEN)\r\n                    return `0` + value;\r\n                return value.toString();\r\n            };\r\n            switch (format) {\r\n                case 'd':\r\n                    return `${y}-${m}-${d}`;\r\n                case 'g':\r\n                    return `${y}-${m}-${d} ${h}:${M}`;\r\n                case 'gg':\r\n                    return `${y}-${twoDigit(m)}-${twoDigit(d)} ${twoDigit(h)}:${twoDigit(M)}`;\r\n                case 'G':\r\n                    return `${y}-${m}-${d} ${h}:${M}:${s}`;\r\n                case 'GG':\r\n                    return `${y}-${twoDigit(m)}-${twoDigit(d)} ${twoDigit(h)}:${twoDigit(M)}:${twoDigit(s)}`;\r\n                case 't':\r\n                    return `${h}:${M}`;\r\n                case 'T':\r\n                    return `${h}:${M}:${s}`;\r\n            }\r\n            return value.toString();\r\n        }\r\n        formatNumber(value, format) {\r\n            let reg = new RegExp('^C[0-9]+');\r\n            if (reg.test(format)) {\r\n                let num = format.substr(1);\r\n                return value.toFixed(num);\r\n            }\r\n            return value.toString();\r\n        }\r\n    }\r\n    wuzhui.GridViewDataCell = GridViewDataCell;\r\n    class GridViewHeaderCell extends wuzhui.Control {\r\n        constructor(field) {\r\n            super(document.createElement('th'));\r\n            this.ascHTML = '';\r\n            this.descHTML = '';\r\n            this.sortingHTML = '...';\r\n            this.toSortHTML = '';\r\n            this.field = field;\r\n            this.sorting = wuzhui.callbacks();\r\n            this.sorted = wuzhui.callbacks();\r\n            if (field.sortExpression) {\r\n                let labelElement = document.createElement('a');\r\n                labelElement.href = 'javascript:';\r\n                labelElement.innerHTML = this.defaultHeaderText();\r\n                labelElement.onclick = () => this.handleSort();\r\n                this._iconElement = document.createElement('span');\r\n                this._iconElement.innerHTML = this.toSortHTML;\r\n                this.appendChild(labelElement);\r\n                this.appendChild(this._iconElement);\r\n                this.sorting.add(() => this._iconElement.innerHTML = this.sortingHTML);\r\n                this.sorted.add(() => this.updateSortIcon());\r\n            }\r\n            else {\r\n                this.element.innerHTML = this.defaultHeaderText();\r\n            }\r\n            this.style(field.headerStyle);\r\n        }\r\n        handleSort() {\r\n            let selectArguments = this.field.gridView.selectArguments;\r\n            let sortType = this.sortType == 'asc' ? 'desc' : 'asc';\r\n            wuzhui.fireCallback(this.sorting, this, { sortType });\r\n            selectArguments.sortExpression = this.field.sortExpression + ' ' + sortType;\r\n            return this.field.gridView.dataSource.select(selectArguments)\r\n                .then(() => {\r\n                this.sortType = sortType;\r\n                wuzhui.fireCallback(this.sorted, this, { sortType });\r\n            });\r\n        }\r\n        defaultHeaderText() {\r\n            return this.field.headerText || this.field.dataField || '';\r\n        }\r\n        get sortType() {\r\n            return this._sortType;\r\n        }\r\n        set sortType(value) {\r\n            this._sortType = value;\r\n        }\r\n        clearSortIcon() {\r\n            this._iconElement.innerHTML = this.toSortHTML;\r\n        }\r\n        updateSortIcon() {\r\n            if (this.sortType == 'asc') {\r\n                this._iconElement.innerHTML = this.ascHTML;\r\n            }\r\n            else if (this.sortType == 'desc') {\r\n                this._iconElement.innerHTML = this.descHTML;\r\n            }\r\n            else {\r\n                this._iconElement.innerHTML = this.toSortHTML;\r\n            }\r\n        }\r\n    }\r\n    wuzhui.GridViewHeaderCell = GridViewHeaderCell;\r\n    class DataControlField {\r\n        constructor(params) {\r\n            if (params.visible == null)\r\n                params.visible = true;\r\n            this._params = params;\r\n        }\r\n        /**\r\n         * Gets the text that is displayed in the footer item of a data control field.\r\n         */\r\n        get footerText() {\r\n            return this._params.footerText;\r\n        }\r\n        /**\r\n         * Sets the text that is displayed in the footer item of a data control field.\r\n         */\r\n        set footerText(value) {\r\n            this._params.footerText = value;\r\n        }\r\n        /**\r\n         * Gets the text that is displayed in the header item of a data control field.\r\n         */\r\n        get headerText() {\r\n            return this._params.headerText;\r\n        }\r\n        /**\r\n        * Sets the text that is displayed in the header item of a data control field.\r\n        */\r\n        set headerText(value) {\r\n            this._params.headerText = value;\r\n        }\r\n        get itemStyle() {\r\n            return this._params.itemStyle;\r\n        }\r\n        set itemStyle(value) {\r\n            this._params.itemStyle = value;\r\n        }\r\n        get footerStyle() {\r\n            return this._params.footerStyle;\r\n        }\r\n        set footerStyle(value) {\r\n            this._params.footerStyle = value;\r\n        }\r\n        get headerStyle() {\r\n            return this._params.headerStyle;\r\n        }\r\n        set headerStyle(value) {\r\n            this._params.headerStyle = value;\r\n        }\r\n        get visible() {\r\n            return this._params.visible;\r\n        }\r\n        get gridView() {\r\n            return this._gridView;\r\n        }\r\n        set gridView(value) {\r\n            this._gridView = value;\r\n        }\r\n        /**\r\n         * Gets a sort expression that is used by a data source control to sort data.\r\n         */\r\n        get sortExpression() {\r\n            return this._params.sortExpression;\r\n        }\r\n        /**\r\n         * Sets a sort expression that is used by a data source control to sort data.\r\n         */\r\n        set sortExpression(value) {\r\n            this._params.sortExpression = value;\r\n        }\r\n        createHeaderCell() {\r\n            let cell = new GridViewHeaderCell(this);\r\n            return cell;\r\n        }\r\n        createFooterCell() {\r\n            let cell = new GridViewCell();\r\n            cell.element.innerHTML = this.footerText || '';\r\n            cell.style(this.footerStyle);\r\n            return cell;\r\n        }\r\n        createItemCell(dataItem) {\r\n            if (!dataItem)\r\n                throw wuzhui.Errors.argumentNull('dataItem');\r\n            let cell = new GridViewCell();\r\n            cell.style(this.itemStyle);\r\n            return cell;\r\n        }\r\n    }\r\n    wuzhui.DataControlField = DataControlField;\r\n})(wuzhui || (wuzhui = {}));\r\n/// <reference path=\"DataControlField.ts\"/>\r\nvar wuzhui;\r\n(function (wuzhui) {\r\n    class GridViewEditableCell extends wuzhui.GridViewDataCell {\r\n        constructor(field, dataItem, valueType) {\r\n            if (field == null)\r\n                throw wuzhui.Errors.argumentNull('field');\r\n            if (dataItem == null)\r\n                throw wuzhui.Errors.argumentNull('dataItem');\r\n            super({\r\n                dataField: field.dataField,\r\n                nullText: field.nullText, dataFormatString: field.dataFormatString\r\n            });\r\n            this._field = field;\r\n            this._dataItem = dataItem;\r\n            this._valueType = valueType;\r\n            this._mode = 'read';\r\n            if (!this._valueType) {\r\n                let value = dataItem[field.dataField];\r\n                if (value instanceof Date)\r\n                    this._valueType = 'date';\r\n                else\r\n                    this._valueType = typeof value;\r\n            }\r\n        }\r\n        get field() {\r\n            return this._field;\r\n        }\r\n        get mode() {\r\n            return this._mode;\r\n        }\r\n        beginEdit() {\r\n            if (this._field.readOnly) {\r\n                return;\r\n            }\r\n            this._mode = 'edit';\r\n            this.render(this._dataItem);\r\n        }\r\n        endEdit() {\r\n            if (this._field.readOnly) {\r\n                return;\r\n            }\r\n            this._mode = 'read';\r\n            let value = this.controlValue;\r\n            this.render(this._dataItem);\r\n        }\r\n        cancelEdit() {\r\n            if (this._field.readOnly) {\r\n                return;\r\n            }\r\n            this._mode = 'read';\r\n            // let value = this._dataItem[this.field.dataField];\r\n            this.render(this._dataItem);\r\n        }\r\n        render(dataItem) {\r\n            //value\r\n            let value = dataItem[this.field.dataField];\r\n            if (this._mode == 'edit') {\r\n                this.element.innerHTML = `<input type=\"text\" />`;\r\n                wuzhui.applyStyle(this.element.querySelector('input'), this._field.controlStyle);\r\n                this.element.querySelector('input').value =\r\n                    value === undefined ? null : `${value}`;\r\n                return;\r\n            }\r\n            super.render(dataItem);\r\n        }\r\n        //==============================================\r\n        // Virtual Methods\r\n        get controlValue() {\r\n            var text = this.element.querySelector('input').value;\r\n            switch (this._valueType) {\r\n                case 'number':\r\n                    return new Number(text).valueOf();\r\n                case 'date':\r\n                    return new Date(text);\r\n                default:\r\n                    return text;\r\n            }\r\n        }\r\n    }\r\n    wuzhui.GridViewEditableCell = GridViewEditableCell;\r\n    class BoundField extends wuzhui.DataControlField {\r\n        constructor(params) {\r\n            super(params);\r\n            this._params = params;\r\n            this._valueElement = document.createElement('span');\r\n        }\r\n        params() {\r\n            return this._params;\r\n        }\r\n        /**\r\n         * Gets the caption displayed for a field when the field's value is null.\r\n         */\r\n        get nullText() {\r\n            return this.params().nullText;\r\n        }\r\n        createItemCell(dataItem) {\r\n            let cell = new GridViewEditableCell(this, dataItem);\r\n            cell.style(this.itemStyle);\r\n            return cell;\r\n        }\r\n        /**\r\n         * Gets the field for the value.\r\n         */\r\n        get dataField() {\r\n            return this.params().dataField;\r\n        }\r\n        /**\r\n         * Gets the string that specifies the display format for the value of the field.\r\n         */\r\n        get dataFormatString() {\r\n            return this.params().dataFormatString;\r\n        }\r\n        get controlStyle() {\r\n            return this.params().controlStyle;\r\n        }\r\n        get readOnly() {\r\n            return this.params().readOnly;\r\n        }\r\n    }\r\n    wuzhui.BoundField = BoundField;\r\n})(wuzhui || (wuzhui = {}));\r\n/// <reference path=\"DataControlField.ts\"/>\r\nvar wuzhui;\r\n(function (wuzhui) {\r\n    class GridViewCommandCell extends wuzhui.GridViewCell {\r\n        constructor(field) {\r\n            super();\r\n        }\r\n    }\r\n    class CommandField extends wuzhui.DataControlField {\r\n        constructor(params) {\r\n            super(params);\r\n            if (!this.params().cancelButtonHTML)\r\n                this.params().cancelButtonHTML = '';\r\n            if (!this.params().deleteButtonHTML)\r\n                this.params().deleteButtonHTML = '';\r\n            if (!this.params().editButtonHTML)\r\n                this.params().editButtonHTML = '';\r\n            if (!this.params().updateButtonHTML)\r\n                this.params().updateButtonHTML = '';\r\n            if (!this.params().newButtonHTML)\r\n                this.params().newButtonHTML = '';\r\n            if (!this.params().insertButtonHTML)\r\n                this.params().insertButtonHTML = '';\r\n        }\r\n        params() {\r\n            return this._params;\r\n        }\r\n        get cancelButtonHTML() {\r\n            return this.params().cancelButtonHTML;\r\n        }\r\n        get deleteButtonHTML() {\r\n            return this.params().deleteButtonHTML;\r\n        }\r\n        get editButtonHTML() {\r\n            return this.params().editButtonHTML;\r\n        }\r\n        get updateButtonHTML() {\r\n            return this.params().updateButtonHTML;\r\n        }\r\n        get newButtonHTML() {\r\n            return this.params().newButtonHTML;\r\n        }\r\n        get insertButtonHTML() {\r\n            return this.params().insertButtonHTML;\r\n        }\r\n        get cancelButtonClass() {\r\n            return this.params().cancelButtonClass;\r\n        }\r\n        get deleteButtonClass() {\r\n            return this.params().deleteButtonClass;\r\n        }\r\n        get editButtonClass() {\r\n            return this.params().editButtonClass;\r\n        }\r\n        get newButtonClass() {\r\n            return this.params().newButtonClass;\r\n        }\r\n        get updateButtonClass() {\r\n            return this.params().updateButtonClass;\r\n        }\r\n        get insertButtonClass() {\r\n            return this.params().insertButtonClass;\r\n        }\r\n        createItemCell(dataItem) {\r\n            let cell = new GridViewCommandCell(this);\r\n            cell.style(this.itemStyle);\r\n            if (this.params().showEditButton) {\r\n                let editButton = this.createEditButton();\r\n                editButton.style.marginRight = '4px';\r\n                if (this.editButtonClass)\r\n                    editButton.className = this.editButtonClass;\r\n                cell.editButton = editButton;\r\n                editButton.addEventListener('click', (e) => this.on_editButtonClick(e));\r\n                cell.appendChild(editButton);\r\n                let updateButton = this.createUpdateButton();\r\n                updateButton.style.display = 'none';\r\n                updateButton.style.marginRight = '4px';\r\n                if (this.updateButtonClass)\r\n                    updateButton.className = this.updateButtonClass;\r\n                cell.updateButton = updateButton;\r\n                updateButton.addEventListener('click', (e) => this.on_insertOrUpdateButtonClick(e));\r\n                cell.appendChild(updateButton);\r\n                let cancelButton = this.createCancelButton();\r\n                cancelButton.style.display = 'none';\r\n                cancelButton.style.marginRight = '4px';\r\n                if (this.cancelButtonClass)\r\n                    cancelButton.className = this.cancelButtonClass;\r\n                cell.cacelButton = cancelButton;\r\n                cancelButton.addEventListener('click', (e) => this.on_cancelButtonClick(e));\r\n                cell.appendChild(cancelButton);\r\n            }\r\n            if (this.params().showDeleteButton) {\r\n                let deleteButton = this.createDeleteButton();\r\n                deleteButton.style.marginRight = '4px';\r\n                if (this.deleteButtonClass)\r\n                    deleteButton.className = this.deleteButtonClass;\r\n                cell.deleteButton = deleteButton;\r\n                deleteButton.onclick = (e) => this.on_deleteButtonClick(e);\r\n                cell.appendChild(deleteButton);\r\n            }\r\n            if (this.params().showNewButton) {\r\n                let newButton = this.createNewButton();\r\n                newButton.style.marginRight = '4px';\r\n                if (this.newButtonClass)\r\n                    newButton.className = this.newButtonClass;\r\n                newButton.onclick = (e) => this.on_newButtonClick(e);\r\n                cell.newButton = newButton;\r\n                cell.appendChild(newButton);\r\n                let insertButton = this.createInsertButton();\r\n                insertButton.style.display = 'none';\r\n                insertButton.style.marginRight = '4px';\r\n                insertButton.addEventListener('click', (e) => this.on_insertOrUpdateButtonClick(e));\r\n                if (this.insertButtonClass)\r\n                    insertButton.className = this.updateButtonClass;\r\n                cell.insertButton = insertButton;\r\n                cell.appendChild(insertButton);\r\n                let cancelButton = this.createCancelButton();\r\n                cancelButton.style.display = 'none';\r\n                cancelButton.style.marginRight = '4px';\r\n                cancelButton.addEventListener('click', (e) => this.on_cancelButtonClick(e));\r\n                if (this.cancelButtonClass)\r\n                    cancelButton.className = this.cancelButtonClass;\r\n                cell.cacelButton = cancelButton;\r\n                cell.appendChild(cancelButton);\r\n            }\r\n            return cell;\r\n        }\r\n        showReadStatusButtons(cell) {\r\n            if (cell.newButton) {\r\n                this.showButton(cell.newButton);\r\n                this.hideButton(cell.insertButton);\r\n            }\r\n            if (cell.editButton) {\r\n                this.showButton(cell.editButton);\r\n                this.hideButton(cell.updateButton);\r\n            }\r\n            if (cell.deleteButton)\r\n                this.showButton(cell.deleteButton);\r\n            this.hideButton(cell.cacelButton);\r\n        }\r\n        createEditButton() {\r\n            let button = document.createElement('a');\r\n            button.innerHTML = this.editButtonHTML;\r\n            button.href = 'javascript:';\r\n            return button;\r\n        }\r\n        createDeleteButton() {\r\n            let button = document.createElement('a');\r\n            button.innerHTML = this.deleteButtonHTML;\r\n            button.href = 'javascript:';\r\n            return button;\r\n        }\r\n        createInsertButton() {\r\n            let button = document.createElement('a');\r\n            button.innerHTML = this.insertButtonHTML;\r\n            button.href = 'javascript:';\r\n            return button;\r\n        }\r\n        createUpdateButton() {\r\n            let button = document.createElement('a');\r\n            button.innerHTML = this.updateButtonHTML;\r\n            button.href = 'javascript:';\r\n            return button;\r\n        }\r\n        createCancelButton() {\r\n            let button = document.createElement('a');\r\n            button.innerHTML = this.cancelButtonHTML;\r\n            button.href = 'javascript:';\r\n            return button;\r\n        }\r\n        createNewButton() {\r\n            let button = document.createElement('a');\r\n            button.innerHTML = this.newButtonHTML;\r\n            button.href = 'javascript:';\r\n            return button;\r\n        }\r\n        hideButton(button) {\r\n            button.style.display = 'none';\r\n        }\r\n        showButton(button) {\r\n            button.style.removeProperty('display');\r\n        }\r\n        findParentCell(element) {\r\n            let cellElement;\r\n            let p = element.parentElement;\r\n            while (p) {\r\n                if (p.tagName == 'TD') {\r\n                    cellElement = p;\r\n                    break;\r\n                }\r\n                p = p.parentElement;\r\n            }\r\n            return cellElement;\r\n        }\r\n        on_editButtonClick(e) {\r\n            let cellElement = this.findParentCell(e.target);\r\n            console.assert(cellElement != null);\r\n            let rowElement = cellElement.parentElement;\r\n            for (let i = 0; i < rowElement.cells.length; i++) {\r\n                let cell = wuzhui.Control.getControlByElement(rowElement.cells[i]);\r\n                if (cell instanceof wuzhui.GridViewEditableCell) {\r\n                    cell.beginEdit();\r\n                }\r\n            }\r\n            let cell = wuzhui.Control.getControlByElement(cellElement);\r\n            this.showButton(cell.cacelButton);\r\n            this.showButton(cell.updateButton);\r\n            this.hideButton(cell.editButton);\r\n            if (cell.deleteButton)\r\n                this.hideButton(cell.deleteButton);\r\n            if (cell.newButton)\r\n                this.hideButton(cell.newButton);\r\n        }\r\n        on_cancelButtonClick(e) {\r\n            let cellElement = this.findParentCell(e.target);\r\n            console.assert(cellElement != null);\r\n            let rowElement = cellElement.parentElement;\r\n            var row = wuzhui.Control.getControlByElement(rowElement);\r\n            if (row[\"isNew\"] == true) {\r\n                rowElement.remove();\r\n                return;\r\n            }\r\n            for (let i = 0; i < rowElement.cells.length; i++) {\r\n                let cell = wuzhui.Control.getControlByElement(rowElement.cells[i]);\r\n                if (cell instanceof wuzhui.GridViewEditableCell) {\r\n                    cell.cancelEdit();\r\n                }\r\n            }\r\n            let cell = wuzhui.Control.getControlByElement(cellElement);\r\n            this.hideButton(cell.cacelButton);\r\n            this.hideButton(cell.updateButton);\r\n            this.showButton(cell.editButton);\r\n            if (cell.deleteButton)\r\n                this.showButton(cell.deleteButton);\r\n            if (cell.newButton)\r\n                this.showButton(cell.newButton);\r\n        }\r\n        on_insertOrUpdateButtonClick(e) {\r\n            if (e.target['_updating'])\r\n                e.target['_updating'] = true;\r\n            let cellElement = wuzhui.ElementHelper.findFirstParentByTagName(e.target, 'td');\r\n            let rowElement = cellElement.parentElement;\r\n            let cell = wuzhui.Control.getControlByElement(cellElement);\r\n            let row = wuzhui.Control.getControlByElement(rowElement);\r\n            //==========================================================\r\n            //  dataItem \r\n            let dataItem = Object.assign({}, row.dataItem || {});\r\n            //==========================================================\r\n            let dataSource = row.gridView.dataSource;\r\n            let editableCells = new Array();\r\n            for (let i = 0; i < rowElement.cells.length; i++) {\r\n                let cell = wuzhui.Control.getControlByElement(rowElement.cells[i]);\r\n                if (cell instanceof wuzhui.GridViewEditableCell && cell.mode == 'edit') {\r\n                    dataItem[cell.field.dataField] = cell.controlValue;\r\n                    editableCells.push(cell);\r\n                }\r\n            }\r\n            let isInsert = e.target == cell.insertButton;\r\n            let p = isInsert ? dataSource.insert(dataItem, rowElement.rowIndex) : dataSource.update(dataItem);\r\n            return p.then(() => {\r\n                if (isInsert) {\r\n                    rowElement.remove();\r\n                    return;\r\n                }\r\n                editableCells.forEach((item) => item.endEdit());\r\n                let cell = wuzhui.Control.getControlByElement(cellElement);\r\n                this.showReadStatusButtons(cell);\r\n                e.target['_updating'] = false;\r\n            }).catch(() => e.target['_updating'] = false);\r\n        }\r\n        on_deleteButtonClick(e) {\r\n            let rowElement = wuzhui.ElementHelper.findFirstParentByTagName(e.target, \"tr\");\r\n            let row = wuzhui.Control.getControlByElement(rowElement);\r\n            let dataSource = row.gridView.dataSource;\r\n            dataSource.delete(row.dataItem)\r\n                .then(() => {\r\n                rowElement.remove();\r\n            });\r\n        }\r\n        on_newButtonClick(e) {\r\n            let rowElement = wuzhui.ElementHelper.findFirstParentByTagName(e.target, \"tr\"); //cellElement.parentElement as HTMLTableRowElement;\r\n            let row = wuzhui.Control.getControlByElement(rowElement);\r\n            let gridView = row.gridView;\r\n            let newRow = gridView.appendDataRow({}, rowElement.rowIndex);\r\n            newRow[\"isNew\"] = true;\r\n            let commandCells = newRow.cells.filter(o => o instanceof GridViewCommandCell);\r\n            newRow.cells.filter(o => o instanceof wuzhui.GridViewEditableCell)\r\n                .forEach((c) => c.beginEdit());\r\n            commandCells.forEach((cell) => {\r\n                if (cell.deleteButton)\r\n                    this.hideButton(cell.deleteButton);\r\n                if (cell.editButton)\r\n                    this.hideButton(cell.editButton);\r\n                this.hideButton(cell.newButton);\r\n                this.showButton(cell.insertButton);\r\n                this.showButton(cell.cacelButton);\r\n            });\r\n        }\r\n    }\r\n    wuzhui.CommandField = CommandField;\r\n})(wuzhui || (wuzhui = {}));\r\n/// <reference path=\"DataControlField.ts\"/>\r\nvar wuzhui;\r\n(function (wuzhui) {\r\n    class CustomField extends wuzhui.DataControlField {\r\n        constructor(params) {\r\n            super(params);\r\n        }\r\n        params() {\r\n            return this._params;\r\n        }\r\n        createHeaderCell() {\r\n            if (this.params().createHeaderCell) {\r\n                let cell = this.params().createHeaderCell();\r\n                cell.style(this.headerStyle);\r\n                return cell;\r\n            }\r\n            return super.createHeaderCell();\r\n        }\r\n        createFooterCell() {\r\n            if (this.params().createFooterCell) {\r\n                let cell = this.params().createFooterCell();\r\n                cell.style(this.params().footerStyle);\r\n                return cell;\r\n            }\r\n            return super.createFooterCell();\r\n        }\r\n        createItemCell(dataItem) {\r\n            if (this.params().createItemCell) {\r\n                let cell = this.params().createItemCell.apply(this, [dataItem]);\r\n                cell.style(this.params().itemStyle);\r\n                return cell;\r\n            }\r\n            return super.createItemCell(dataItem);\r\n        }\r\n    }\r\n    wuzhui.CustomField = CustomField;\r\n})(wuzhui || (wuzhui = {}));\r\n"],"file":"wuzhui.js"}